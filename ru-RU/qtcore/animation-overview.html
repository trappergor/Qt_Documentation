<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><!-- animation.qdoc --><title>The Animation Framework | Qt Core 5.7</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    window.onload = function(){document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");};
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td ><a href="../qtdoc/supported-platforms-and-configurations.html#qt-5-7">Qt 5.7</a></td><td ><a href="qtcore-index.html">Qt Core</a></td><td >The Animation Framework</td></tr></table><table class="buildversion"><tr>
<td id="buildversion" width="100%" align="right">Справочная документация Qt 5.7.1</td>
        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3><a name="toc">Содержание</a></h3>
<ul>
<li class="level1"><a href="#the-animation-architecture">Архитектура Анимации</a></li>
<li class="level1"><a href="#classes-in-the-animation-framework">Классы в Animation Framework</a></li>
<li class="level1"><a href="#animating-qt-properties">Анимация Свойств Qt</a></li>
<li class="level1"><a href="#animations-and-the-graphics-view-framework">Анимация и Graphics View Framework</a></li>
<li class="level1"><a href="#easing-curves">Переходные характеристики</a></li>
<li class="level1"><a href="#putting-animations-together">Объединяем анимацию</a></li>
<li class="level1"><a href="#animations-and-states">Анимации и состояния</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">The Animation Framework</h1><span class="subtitle"></span> <!-- $$$animation-overview.html-description --><div class="descr"><a name="details"></a><p>Анимационный фреймворк призван обеспечить простой способ создания анимированных и плавных графических интерфейсов. Анимируя свойства Qt, платформа предоставляет большую свободу для анимации виджетов и других объектов <a href="qobject.html">QObject</a>. Фреймворк также можно использовать с фреймворком Graphics View. Многие из концепций, доступных в рамках анимации, также доступны в <a href="../qtquick/qtquick-index.html">Qt Quick</a>, где он предлагает декларативный способ определения анимации. Большая часть знаний, полученных о структуре анимации, может быть применена к <a href="../qtquick/qtquick-index.html">Qt Quick</a>.</p>
<p>В этом обзоре мы объясняем основы его архитектуры. Мы также показываем примеры наиболее распространенных методов, которые платформа позволяет анимировать объекты <a href="qobject.html">QObject</a> и графические элементы.</p><a name="the-animation-architecture"></a><h2 id="the-animation-architecture">Архитектура Анимации</h2>
<p>В этом разделе мы целиком рассмотрим архитектуру фреймворка анимации и то, как он используется для анимации свойств Qt. На следующей диаграмме показаны наиболее важные классы в Animation framework.</p>
<p class="centerAlign"><img src="images/animations-architecture.png" alt="" /></p><p>Animation framework foundation состоит из базового класса <a href="qabstractanimation.html">QAbstractAnimation</a> и двух его подклассов <a href="qvariantanimation.html">QVariantAnimation</a> и <a href="qanimationgroup.html">QAnimationGroup</a>. <a href="qabstractanimation.html">QAbstractAnimation</a> является предком всех анимаций. Он представляет основные свойства, общие для всех анимаций во фреймворке; в частности, возможность запуска, остановки и приостановки анимации. Он также получает уведомления об изменении времени.</p>
<p>Animation framework также предоставляет класс <a href="qpropertyanimation.html">QPropertyAnimation</a>, который наследует <a href="qvariantanimation.html">QVariantAnimation</a>и выполняет анимацию Qt property, которое является частью <a href="metaobjects.html">метаобъектной системы</a> Qt. Класс выполняет интерполяцию по свойству, используя переходную характеристику. Поэтому, когда вы хотите анимировать значение, вы можете объявить его как свойство и сделать свой класс <a href="qobject.html">QObject</a>. Обратите внимание, что это дает нам большую свободу в анимации уже существующих виджетов и других объектов <a href="qobject.html">QObject</a>.</p>
<p>Сложные анимации могут быть построены путем построения древовидной структуры <a href="qabstractanimation.html">QAbstractAnimation</a>. Дерево построено с помощью <a href="qanimationgroup.html">QAnimationGroup</a>, которые функционируют как контейнеры для других анимаций. Обратите также внимание, что группы являются подклассами <a href="qabstractanimation.html">QAbstractAnimation</a>, поэтому сами группы могут содержать другие группы.</p>
<p>Animation framework может использоваться сам по себе, но также предназначен для того, чтобы быть частью фреймворка state machine (см. <a href="statemachine-api.html">фреймворк state machine</a> для введения в Qt state machine). State machine предоставляет специальную структуру, которая может воспроизводить анимацию. <a href="qstate.html">QState</a> также может задавать свойства при входе или выходе из структуры, и эта специальная структура анимации будет интерполироваться между этими значениями при задании <a href="qpropertyanimation.html">QPropertyAnimation</a>. Мы рассмотрим это более подробно позже.</p>
<p>За кулисами анимация управляется глобальным таймером, который отправляет <a href="qabstractanimation.html#updateCurrentTime">обновления</a> всем анимациям, которые исполняются.</p>
<p>Подробные описания функций и ролей классов во фреймворке см. в описаниях классов.</p><a name="classes-in-the-animation-framework"></a><h2 id="classes-in-the-animation-framework">Классы в Animation Framework</h2>
<p>Эти классы обеспечивают основу для создания простых и сложных анимаций.</p>
<div class="table"><table class="annotated">
<tr class="odd topAlign"><td class="tblName"><p><a href="qabstractanimation.html">QAbstractAnimation</a></p></td><td class="tblDescr"><p>База всех анимаций</p></td></tr>
<tr class="even topAlign"><td class="tblName"><p><a href="qanimationgroup.html">QAnimationGroup</a></p></td><td class="tblDescr"><p>Абстрактный базовый класс для групп анимаций</p></td></tr>
<tr class="odd topAlign"><td class="tblName"><p><a href="qparallelanimationgroup.html">QParallelAnimationGroup</a></p></td><td class="tblDescr"><p>Параллельная группа анимаций</p></td></tr>
<tr class="even topAlign"><td class="tblName"><p><a href="qpauseanimation.html">QPauseAnimation</a></p></td><td class="tblDescr"><p>Пауза для QSequentialAnimationGroup</p></td></tr>
<tr class="odd topAlign"><td class="tblName"><p><a href="qpropertyanimation.html">QPropertyAnimation</a></p></td><td class="tblDescr"><p>Анимирует свойства в Qt</p></td></tr>
<tr class="even topAlign"><td class="tblName"><p><a href="qsequentialanimationgroup.html">QSequentialAnimationGroup</a></p></td><td class="tblDescr"><p>Последовательная группа анимаций</p></td></tr>
<tr class="odd topAlign"><td class="tblName"><p><a href="qvariantanimation.html">QVariantAnimation</a></p></td><td class="tblDescr"><p>Базовый класс для анимации</p></td></tr>
<tr class="even topAlign"><td class="tblName"><p><a href="qeasingcurve.html">QEasingCurve</a></p></td><td class="tblDescr"><p>Переходные характеристики для управления анимацией</p></td></tr>
<tr class="odd topAlign"><td class="tblName"><p><a href="qtimeline.html">QTimeLine</a></p></td><td class="tblDescr"><p>Временная шкала (timeline) для управления анимацией</p></td></tr>
</table></div><a name="animating-qt-properties"></a><h2 id="animating-qt-properties">Анимация Свойств Qt</h2>
<p>Как упоминалось в предыдущем разделе, класс <a href="qpropertyanimation.html">QPropertyAnimation</a> может интерполироваться по свойствам Qt. Зачатую этот класс используется для анимации значений; фактически, его суперкласс, <a href="qvariantanimation.html">QVariantAnimation</a>, имеет пустую реализацию updateCurrentValue() и не изменяет никакого значения, если мы не изменим его сами по <a href="qvariantanimation.html#valueChanged">сигналу  valueChanged</a>.</p>
<p>Основная причина, по которой мы решили анимировать свойства Qt, заключается в том, что это дает нам свободу анимировать уже существующие классы в Qt API. Примечательно, что класс <a href="../qtwidgets/qwidget.html">QWidget</a> (который мы также можем встроить в <a href="../qtwidgets/qgraphicsview.html">QGraphicsView</a>) имеет свойства для своих границ, цветов и т. д. Давайте рассмотрим небольшой пример:</p>
<pre class="cpp"><span class="type">QPushButton</span> button(<span class="string">&quot;Animated Button&quot;</span>); button<span class="operator">.</span>show(); <span class="type">QPropertyAnimation</span> animation(<span class="operator">&amp;</span>button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); animation<span class="operator">.</span>setDuration(<span class="number">10000</span>); animation<span class="operator">.</span>setStartValue(<span class="type">QRect</span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>setEndValue(<span class="type">QRect</span>(<span class="number">250</span><span class="operator">,</span> <span class="number">250</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>start();</pre>
<p>Этот код переместит <code>button</code> из левого верхнего угла экрана в положение (250, 250) за 10 секунд (10000 миллисекунд).</p>
<p>В приведенном выше примере будет выполнена линейная интерполяция между начальным и конечным значениями. Также можно установить значения, расположенные между начальным и конечным значением. Интерполяция будет проходить по этим точкам.</p>
<pre class="cpp"><span class="type">QPushButton</span> button(<span class="string">&quot;Animated Button&quot;</span>); button<span class="operator">.</span>show(); <span class="type">QPropertyAnimation</span> animation(<span class="operator">&amp;</span>button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); animation<span class="operator">.</span>setDuration(<span class="number">10000</span>); animation<span class="operator">.</span>setKeyValueAt(<span class="number">0</span><span class="operator">,</span> <span class="type">QRect</span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>setKeyValueAt(<span class="number">0.8</span><span class="operator">,</span> <span class="type">QRect</span>(<span class="number">250</span><span class="operator">,</span> <span class="number">250</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>setKeyValueAt(<span class="number">1</span><span class="operator">,</span> <span class="type">QRect</span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>start();</pre>
<p>В этом примере анимация переместит кнопку на (250, 250) за 8 секунд, а затем вернет его обратно в исходное положение в оставшиеся 2 секунды. Движение будет линейно интерполироваться между этими точками.</p>
<p>У вас также есть возможность анимировать значения <a href="qobject.html">QObject</a>, который не объявлен как Qt property. Единственное требование заключается в том, что бы это значение имело сеттер. Затем вы можете создать подкласс класса, содержащий это значение, и объявить свойство, которое использует этот сеттер. Обратите внимание, что каждое Qt property требует геттера, поэтому вам нужно будет предоставить геттер самостоятельно, если он не определен.</p>
<pre class="cpp"><span class="keyword">class</span> MyGraphicsRectItem : <span class="keyword">public</span> <span class="type">QObject</span><span class="operator">,</span> <span class="keyword">public</span> <span class="type">QGraphicsRectItem</span> { Q_OBJECT Q_PROPERTY(<span class="type">QRectF</span> geometry READ geometry WRITE setGeometry) };</pre>
<p>В приведенном выше примере кода мы создаем подкласс <a href="../qtwidgets/qgraphicsrectitem.html">QGraphicsRectItem</a> и определяем свойство геометрии. Теперь мы можем анимировать геометрию виджетов, даже если <a href="../qtwidgets/qgraphicsrectitem.html">QGraphicsRectItem</a> не предоставляет свойство геометрии.</p>
<p>Для общего ознакомления с системой свойств Qt см. ее <a href="properties.html">обзор</a>.</p><a name="animations-and-the-graphics-view-framework"></a><h2 id="animations-and-the-graphics-view-framework">Анимация и Graphics View Framework</h2>
<p>Если вы хотите анимировать объекты <a href="../qtwidgets/qgraphicsitem.html">QGraphicsItem</a>, вам также нужно использовать <a href="qpropertyanimation.html">QPropertyAnimation</a>. Однако <a href="../qtwidgets/qgraphicsitem.html">QGraphicsItem</a> не наследует <a href="qobject.html">QObject</a>. Хорошим решением будет создание подкласса QGraphicsItem, который вы хотите анимировать. Также этот класс наследует <a href="qobject.html">QObject</a>. Таким образом, <a href="qpropertyanimation.html">QPropertyAnimation</a> можно использовать с объектами <a href="../qtwidgets/qgraphicsitem.html">QGraphicsItem</a>. В приведенном ниже примере показано, как это делается. Другой возможностью будет наследование объекта <a href="../qtwidgets/graphicsview.html#qgraphicswidget">QGraphicsWidget</a>, который уже является <a href="qobject.html">QObject</a>.</p>
<pre class="cpp"><span class="keyword">class</span> Pixmap : <span class="keyword">public</span> <span class="type">QObject</span><span class="operator">,</span> <span class="keyword">public</span> <span class="type">QGraphicsPixmapItem</span> { Q_OBJECT Q_PROPERTY(<span class="type">QPointF</span> pos READ pos WRITE setPos) <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span></pre>
<p>Как описано в предыдущем разделе, нам нужно определить свойства, которые мы хотим анимировать.</p>
<p>Обратите внимание, что класс <a href="qobject.html">QObject</a> должен быть унаследован первым, поскольку этого требует метаобъектная система.</p><a name="easing-curves"></a><h2 id="easing-curves">Переходные характеристики</h2>
<p>Как уже упоминалось, <a href="qpropertyanimation.html">QPropertyAnimation</a> выполняет интерполяцию между значением свойства start и end. Помимо добавления дополнительных ключевых значений в анимацию, можно также использовать переходную характеристику. Переходная характеристика описывает функцию, которая управляет скоростью интерполяции между 0 и 1 и полезна, если вы хотите управлять скоростью анимации без изменения пути интерполяции.</p>
<pre class="cpp"><span class="type">QPushButton</span> button(<span class="string">&quot;Animated Button&quot;</span>); button<span class="operator">.</span>show(); <span class="type">QPropertyAnimation</span> animation(<span class="operator">&amp;</span>button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); animation<span class="operator">.</span>setDuration(<span class="number">3000</span>); animation<span class="operator">.</span>setStartValue(<span class="type">QRect</span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>setEndValue(<span class="type">QRect</span>(<span class="number">250</span><span class="operator">,</span> <span class="number">250</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); animation<span class="operator">.</span>setEasingCurve(<span class="type">QEasingCurve</span><span class="operator">::</span>OutBounce); animation<span class="operator">.</span>start();</pre>
<p>Здесь анимация будет следовать кривой, заставляющей ее отскакивать подобно мячу, как будто она движется от начала до конца. <a href="qeasingcurve.html">QEasingCurve</a> имеет большое разнообразие кривых на ваш выбор. Они определяются - <a href="qeasingcurve.html#Type-enum">QEasingCurve::Type</a> enum. Если вам нужна другая кривая, вы также можете реализовать ее самостоятельно и зарегистрировать ее в <a href="qeasingcurve.html">QEasingCurve</a>.</p><a name="putting-animations-together"></a><h2 id="putting-animations-together">Объединяем анимацию</h2>
<p>Приложение часто содержит более одной анимации. Например, может потребоваться переместить несколько графических элементов одновременно или последовательно друг за другом.</p>
<p>Подклассы <a href="qanimationgroup.html">QAnimationGroup</a>(<a href="qsequentialanimationgroup.html">QSequentialAnimationGroup</a> и <a href="qparallelanimationgroup.html">QParallelAnimationGroup</a>) являются контейнерами для других анимаций, так что эти анимации могут быть анимированы либо последовательно, либо одновременно. <a href="qanimationgroup.html">QAnimationGroup</a> является примером анимации, которая не анимирует свойства, но периодически получает уведомления об изменениях времени. Это позволяет ему пересылать эти изменения времени в содержащиеся анимации и тем самым контролировать, когда воспроизводятся анимации.</p>
<p>Давайте рассмотрим примеры кода, которые используют как <a href="qsequentialanimationgroup.html">QSequentialAnimationGroup</a>, так и <a href="qparallelanimationgroup.html">QParallelAnimationGroup</a>, начиная с последнего.</p>
<pre class="cpp"><span class="type">QPushButton</span> <span class="operator">*</span>bonnie <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QPushButton</span>(<span class="string">&quot;Bonnie&quot;</span>); bonnie<span class="operator">-</span><span class="operator">&gt;</span>show(); <span class="type">QPushButton</span> <span class="operator">*</span>clyde <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QPushButton</span>(<span class="string">&quot;Clyde&quot;</span>); clyde<span class="operator">-</span><span class="operator">&gt;</span>show(); <span class="type">QPropertyAnimation</span> <span class="operator">*</span>anim1 <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QPropertyAnimation</span>(bonnie<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); <span class="comment">// Set up anim1</span> <span class="type">QPropertyAnimation</span> <span class="operator">*</span>anim2 <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QPropertyAnimation</span>(clyde<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); <span class="comment">// Set up anim2</span> <span class="type">QParallelAnimationGroup</span> <span class="operator">*</span>group <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QParallelAnimationGroup</span>; group<span class="operator">-</span><span class="operator">&gt;</span>addAnimation(anim1); group<span class="operator">-</span><span class="operator">&gt;</span>addAnimation(anim2); group<span class="operator">-</span><span class="operator">&gt;</span>start();</pre>
<p>Объект group воспроизводит более одной анимации одновременно. Вызов его функции <a href="qabstractanimation.html#start">start()</a> запустит все анимации, которыми он управляет.</p>
<pre class="cpp"><span class="type">QPushButton</span> button(<span class="string">&quot;Animated Button&quot;</span>); button<span class="operator">.</span>show(); <span class="type">QPropertyAnimation</span> anim1(<span class="operator">&amp;</span>button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); anim1<span class="operator">.</span>setDuration(<span class="number">3000</span>); anim1<span class="operator">.</span>setStartValue(<span class="type">QRect</span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); anim1<span class="operator">.</span>setEndValue(<span class="type">QRect</span>(<span class="number">500</span><span class="operator">,</span> <span class="number">500</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); <span class="type">QPropertyAnimation</span> anim2(<span class="operator">&amp;</span>button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>); anim2<span class="operator">.</span>setDuration(<span class="number">3000</span>); anim2<span class="operator">.</span>setStartValue(<span class="type">QRect</span>(<span class="number">500</span><span class="operator">,</span> <span class="number">500</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); anim2<span class="operator">.</span>setEndValue(<span class="type">QRect</span>(<span class="number">1000</span><span class="operator">,</span> <span class="number">500</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); <span class="type">QSequentialAnimationGroup</span> group; group<span class="operator">.</span>addAnimation(<span class="operator">&amp;</span>anim1); group<span class="operator">.</span>addAnimation(<span class="operator">&amp;</span>anim2); group<span class="operator">.</span>start();</pre>
<p>Как вы, без сомнения, догадались, <a href="qsequentialanimationgroup.html">QSequentialAnimationGroup</a> воспроизводит свои анимации по очереди. Он запускает следующую анимацию в списке после завершения предыдущей.</p>
<p>Поскольку группа анимации - это тоже анимация, ее можно добавить в другую группу. Таким образом, можно построить древовидную структуру анимаций, которая определяет, когда анимации воспроизводятся относительно друг друга.</p><a name="animations-and-states"></a><h2 id="animations-and-states">Анимации и состояния</h2>
<p>При использовании <a href="statemachine-api.html">state machine</a> можно связать одну или несколько анимаций с переходом между состояниями с помощью класса <a href="qsignaltransition.html">QSignalTransition</a> или <a href="qeventtransition.html">QEventTransition</a>. Оба эти класса являются производными от <a href="qabstracttransition.html">QAbstractTransition</a>, который определяет вспомогательную функцию <a href="qabstracttransition.html#addAnimation">addAnimation()</a>, которая позволяет добавлять одну или несколько анимаций, запускаемых при переходе.</p>
<p>У нас также есть возможность связать свойства с состояниями, а не устанавливать начальные и конечные значения самостоятельно. Ниже приведен полный пример кода, который анимирует геометрию <a href="../qtwidgets/qpushbutton.html">QPushButton</a>.</p>
<pre class="cpp"><span class="type">QPushButton</span> <span class="operator">*</span>button <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QPushButton</span>(<span class="string">&quot;Animated Button&quot;</span>); button<span class="operator">-</span><span class="operator">&gt;</span>show(); <span class="type">QStateMachine</span> <span class="operator">*</span>machine <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QStateMachine</span>; <span class="type">QState</span> <span class="operator">*</span>state1 <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QState</span>(machine); state1<span class="operator">-</span><span class="operator">&gt;</span>assignProperty(button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span><span class="operator">,</span> <span class="type">QRect</span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); machine<span class="operator">-</span><span class="operator">&gt;</span>setInitialState(state1); <span class="type">QState</span> <span class="operator">*</span>state2 <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QState</span>(machine); state2<span class="operator">-</span><span class="operator">&gt;</span>assignProperty(button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span><span class="operator">,</span> <span class="type">QRect</span>(<span class="number">250</span><span class="operator">,</span> <span class="number">250</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">30</span>)); <span class="type">QSignalTransition</span> <span class="operator">*</span>transition1 <span class="operator">=</span> state1<span class="operator">-</span><span class="operator">&gt;</span>addTransition(button<span class="operator">,</span> SIGNAL(clicked())<span class="operator">,</span> state2); transition1<span class="operator">-</span><span class="operator">&gt;</span>addAnimation(<span class="keyword">new</span> <span class="type">QPropertyAnimation</span>(button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>)); <span class="type">QSignalTransition</span> <span class="operator">*</span>transition2 <span class="operator">=</span> state2<span class="operator">-</span><span class="operator">&gt;</span>addTransition(button<span class="operator">,</span> SIGNAL(clicked())<span class="operator">,</span> state1); transition2<span class="operator">-</span><span class="operator">&gt;</span>addAnimation(<span class="keyword">new</span> <span class="type">QPropertyAnimation</span>(button<span class="operator">,</span> <span class="string">&quot;geometry&quot;</span>)); machine<span class="operator">-</span><span class="operator">&gt;</span>start();</pre>
<p>Более полный пример использования фреймворка state machine для анимации см. В примере states example (он находится в каталоге <code>examples/animation/states</code>).</p>
</div><!-- @@@animation-overview.html --></div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym>2016 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners.<br> The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation.<br> Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
</div>
</body>
</html>
